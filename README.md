# static-code-analysis (PES1UG23CS401)

Software Engineering lab for static code analysis using tools like pylint, bandit and flake8.

## Known Issues

- Based on reports generated by [pylint](./reports/uncleaned/pylint_report.txt),
[flake8](./reports/uncleaned/flake8_report.txt),
[bandit](./reports/uncleaned/bandit_report.txt).

| Issue     | Type      | Line      | Description | Fix Approach |
|-----------|-----------|-----------|-------------|--------------|
| Missing module docstring | Documentation | 1 | The module lacks a top-level docstring describing its purpose. | Add a short description at the top of the file explaining what the module does. |
| Missing function docstring | Documentation | 9, 16, 25, 29, 36, 42, 48, 56 | Several functions lack docstrings. | Add brief docstrings explaining what each function does, its parameters, and return values. |
| Invalid function naming (e.g. `addItem`) | Style | 9, 16, 25, 29, 36, 42, 48 | Function names don’t follow Python’s `snake_case` naming convention. | Rename functions to follow `snake_case` (e.g., `add_item`, `remove_item`). |
| Dangerous default value (`[]`) | Bug | 9 | A mutable default argument can lead to shared state between calls. | Use `None` as default and initialize inside the function (e.g., `def f(arg=None): arg = arg or []`). |
| Should use f-string | Style | 13 | Regular string formatting used instead of modern f-strings. | Replace string concatenation or `%` formatting with f-strings for clarity. |
| Bare except block | Safety | 21 | Catching all exceptions without specifying type hides real errors. | Catch specific exceptions (e.g., `except ValueError:`) or re-raise unexpected ones. |
| File opened without encoding | Safety | 30, 37 | `open()` used without specifying encoding, which may cause cross-platform issues. | Use `open(filename, "r", encoding="utf-8")` or similar. |
| Use of `global` keyword | Design | 31 | Global variables can cause side effects and hard-to-track bugs. | Avoid `global`; use return values, parameters, or encapsulate state in a class. |
| Use of `eval()` | Security | 67 | Using `eval()` can execute arbitrary code and is unsafe. | Replace with `ast.literal_eval()` or safer parsing methods like `json.loads()`. |
| File not closed properly | Best Practice | 30, 37 | File opened without using `with` statement for automatic closure. | Use `with open(...) as f:` to handle file operations safely. |
 Unused import `logging` | Cleanup | 2 | The `logging` module is imported but not used. | Remove the unused import statement. |

- After fixing all the issues in the [cleaned_inventory_system.py](./src/cleaned_inventory_system.py),
these 3 tools report no errors. [pylint](./reports/cleaned/cleaned_pylint_report.txt),
[flake8](./reports/cleaned/cleaned_flake8_report.txt),
[bandit](./reports/cleaned/cleaned_bandit_report.txt)


## Reports

### Uncleaned
- [pylint report](./reports/uncleaned/pylint_report.txt)
- [flake8 report](./reports/uncleaned/flake8_report.txt)
- [bandit report](./reports/uncleaned/bandit_report.txt)

### Cleaned
- [cleaned pylint report](./reports/cleaned/cleaned_pylint_report.txt)
- [cleaned flake8 report](./reports/cleaned/cleaned_flake8_report.txt)
- [cleaned bandit report](./reports/cleaned/cleaned_bandit_report.txt)

## Setup

- Clone the repository
```bash
git clone https://github.com/nishantHolla/static-code-analysis.git
cd  static-code-analysis/src
```

- Install pylint, flake8 and bandit
```bash
pip install pylint flake8 bandit
```

- Run program
```bash
python inventory_system.py
python cleaned_inventory_system.py
```

- Generate reports
```bash
# Uncleaned
pylint inventory_system.py > pylint_report.txt
flake8 inventory_system.py > flake8_report.txt
bandit -r inventory_system.py > bandit_report.txt
# Cleaned
pylint cleaned_inventory_system.py > pylint_report.txt
flake8 cleaned_inventory_system.py > flake8_report.txt
bandit -r cleaned_inventory_system.py > bandit_report.txt
```
